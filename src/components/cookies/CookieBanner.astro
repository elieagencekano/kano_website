<div id="cookie-banner" class="cookie-banner hidden">
  <div class="cookie-box glass">
    <p class="cookie-text">
      Nous utilisons des cookies pour garantir le bon fonctionnement du site et pour analyser notre audience.
    </p>

    <div class="actions">
      <button id="cookie-accept" class="btn accept">Accepter</button>
      <button id="cookie-refuse" class="btn refuse">Refuser</button>
    </div>
  </div>
</div>

<style>
.cookie-banner{
  position:fixed;
  bottom:32px;
  left:50%;
  transform:translateX(-50%);
  z-index:9999;
  opacity:0;
  pointer-events:none;
  transition:.35s ease;
}

.cookie-banner.show{
  opacity:1;
  transform:translateX(-50%) translateY(0);
  pointer-events:auto;
}

.cookie-banner.hiding{
  opacity:0;
  transform:translateX(-50%) translateY(10px);
  pointer-events:none;
}

.cookie-banner.hidden{
  display:none !important;
}

.cookie-box{
  min-width:340px;
  max-width:460px;
  padding:18px 22px;
  border-radius:18px;
  background:rgba(15,20,30,.55); 
  backdrop-filter:blur(22px);
  -webkit-backdrop-filter:blur(22px);
  border:1px solid rgba(255,255,255,.18);
  box-shadow:0 16px 40px rgba(0,0,0,.55),0 0 0 1px rgba(255,255,255,.05) inset;
  display:flex;
  flex-direction:column;
  gap:14px;
}

.cookie-text{
  margin:0;
  font-size:.92rem;
  color:var(--kano-light);
  line-height:1.45;
  opacity:.92;
}

.actions{
  display:flex;
  gap:10px;
  width:100%;
}

.btn{
  flex:1;
  padding:10px 0;
  border-radius:999px;
  font-family:Montserrat,sans-serif;
  font-weight:700;
  font-size:.9rem;
  cursor:pointer;
  border:none;
  transition:.25s ease;
}

.accept{
  background:var(--kano-gold);
  color:var(--kano-ink);
}

.refuse{
  background:rgba(255,255,255,.10);
  border:1px solid rgba(255,255,255,.18);
  color:var(--kano-light);
}

.refuse:hover{
  background:rgba(255,255,255,.14);
  border-color:rgba(212,175,55,.25);
  color:var(--kano-gold);
}

@media(max-width:480px){
  .cookie-banner{bottom:20px}
  .cookie-box{min-width:auto;width:calc(100vw - 32px);padding:16px 18px}
  .cookie-text{font-size:.9rem}
  .btn{font-size:.88rem}
}
</style>

<script is:inline>
(function(){
  const banner = document.getElementById("cookie-banner");
  const accept = document.getElementById("cookie-accept");
  const refuse = document.getElementById("cookie-refuse");

  const state = localStorage.getItem("kano_cookie_consent");

  if (!state) {
    banner.classList.remove("hidden");
    requestAnimationFrame(() => banner.classList.add("show"));
  }

  function closeBanner() {
    banner.classList.remove("show");
    banner.classList.add("hiding");
    setTimeout(() => banner.classList.add("hidden"), 350);
  }

  if (accept) {
    accept.addEventListener("click", () => {
      localStorage.setItem("kano_cookie_consent","accepted");
      closeBanner();

      setTimeout(() => {
        const gaScript = document.createElement("script");
        gaScript.async = true;
        gaScript.src = "https://www.googletagmanager.com/gtag/js?id=G-NS8LN5FVEZ";
        document.head.appendChild(gaScript);

        const gaConfig = document.createElement("script");
        gaConfig.innerHTML = `
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-NS8LN5FVEZ');
        `;
        document.head.appendChild(gaConfig);
      }, 400);
    });
  }

  if (refuse) {
    refuse.addEventListener("click", () => {
      localStorage.setItem("kano_cookie_consent","refused");
      closeBanner();
    });
  }
})();
</script>