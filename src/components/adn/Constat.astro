---
const constats = [
  {
    title: "Un manque d'alignement",
    text: "On a vite réalisé que beaucoup d’entreprises avaient un site qui ne collait pas à leur réalité. Ni visuellement, ni dans le contenu, ni dans l’usage. Un site présent, mais pas vraiment utile au quotidien."
  },
  {
    title: "Un manque de clarté",
    text: "Le digital leur paraissait souvent plus compliqué qu'utile. Des termes techniques jamais expliqués, des choix imposés sans justification, des résultats impossibles à mesurer."
  },
  {
    title: "Le piège",
    text: "Ils se retrouvaient enfermés : engagés pour 5 ans, avec des mensualités lourdes et aucune marge de manœuvre. Obligés d'allouer du budget à une présence digitale qui ne générait rien."
  },
  {
    title: "Le paradoxe",
    text: "Et pourtant, le digital restait indispensable. Impossible de s'en passer, impossible de s'y retrouver. Une relation déséquilibrée, subie plutôt que choisie."
  }
];
---

<section class="constat" aria-label="Le constat">
  <div class="container">
    <header class="header-constat">
      <h2>Ce qu'on a observé</h2>
      <p>Avant de créer KANO, on a écouté. Et ce qu'on a entendu nous a convaincus qu'il fallait faire autrement.</p>
    </header>

    <div class="timeline">
      {constats.map((item, index) => (
        <div class="timeline-item" style={`--delay: ${index * 150}ms`}>
          <div class="timeline-marker">
            <span class="marker-dot"></span>
          </div>
          <div class="timeline-content glass">
            <h3>{item.title}</h3>
            <p>{item.text}</p>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
.constat{position:relative;padding:100px 0;overflow:hidden}
.container{max-width:900px;margin:0 auto;padding:0 32px}
.header-constat{text-align:center;margin-bottom:60px;opacity:0;transform:translateY(40px)}
.header-constat.visible{animation:fadeUp 800ms cubic-bezier(.16,1,.3,1) forwards}
@keyframes fadeUp{from{opacity:0;transform:translateY(40px)}to{opacity:1;transform:translateY(0)}}
.header-constat h2{font-size:clamp(1.8rem,3.5vw,2.8rem);font-family:Montserrat,sans-serif;font-weight:900;margin:0 0 16px;background:linear-gradient(135deg,#fff 0%,rgba(255,255,255,.9) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;line-height:1.2;padding-bottom:4px}
.header-constat p{font-size:1.1rem;color:var(--kano-light);opacity:.8;line-height:1.6;margin:0;max-width:600px;margin-left:auto;margin-right:auto}
.timeline{position:relative;padding-left:40px}
.timeline::before{content:"";position:absolute;left:11px;top:0;bottom:0;width:2px;background:linear-gradient(180deg,rgba(212,175,55,.4) 0%,rgba(212,175,55,.1) 100%)}
.timeline-item{position:relative;margin-bottom:32px;opacity:0;transform:translateX(-30px)}
.timeline-item.visible{animation:slideIn 800ms cubic-bezier(.16,1,.3,1) var(--delay) forwards}
.timeline-item:last-child{margin-bottom:0}
@keyframes slideIn{from{opacity:0;transform:translateX(-30px)}to{opacity:1;transform:translateX(0)}}
.timeline-marker{position:absolute;left:-40px;top:24px;width:24px;height:24px;display:flex;align-items:center;justify-content:center}
.marker-dot{width:12px;height:12px;border-radius:50%;background:var(--kano-gold);box-shadow:0 0 20px rgba(212,175,55,.4);transition:all .3s cubic-bezier(.34,.46,.35,1)}
.timeline-item:hover .marker-dot{transform:scale(1.3);box-shadow:0 0 30px rgba(212,175,55,.6)}
.timeline-content{padding:28px 32px;border-radius:16px;transition:all .3s cubic-bezier(.34,.46,.35,1)}
.glass{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.1);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px)}
.timeline-item:hover .timeline-content{transform:translateX(8px);background:rgba(255,255,255,.06);border-color:rgba(212,175,55,.2)}
.timeline-content h3{font-size:1.2rem;font-family:Montserrat,sans-serif;font-weight:800;color:var(--kano-gold);margin:0 0 12px}
.timeline-content p{font-size:.95rem;color:var(--kano-light);opacity:.85;line-height:1.7;margin:0}
@media (max-width:768px){.constat{padding:80px 0}.container{padding:0 20px}.header-constat{margin-bottom:48px}.timeline{padding-left:32px}.timeline::before{left:7px}.timeline-marker{left:-32px}.timeline-content{padding:24px}}
@media (max-width:480px){.constat{padding:60px 0}.timeline{padding-left:28px}.timeline::before{left:5px}.timeline-marker{left:-28px;width:20px;height:20px}.marker-dot{width:10px;height:10px}.timeline-content{padding:20px 18px}.timeline-content h3{font-size:1.1rem}.timeline-content p{font-size:.9rem}}
</style>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const elements = document.querySelectorAll('.header-constat, .timeline-item');
  
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting && entry.boundingClientRect.top > 0) {
        entry.target.classList.add('visible');
        observer.unobserve(entry.target);
      }
    });
  }, {
    threshold: 0.3,
    rootMargin: '0px 0px -100px 0px'
  });

  setTimeout(() => {
    elements.forEach(el => {
      const rect = el.getBoundingClientRect();
      if (rect.top > window.innerHeight) {
        observer.observe(el);
      } else if (rect.top > 100) {
        observer.observe(el);
      } else {
        el.classList.add('visible');
      }
    });
  }, 100);
});
</script>