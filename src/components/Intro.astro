---
import logo from 'logo-kano.svg';
---

<div id="intro-screen" class="intro-screen">
    <div class="intro-content">
      <img src={logo} alt="KANO" class="logo-img" />
      <p class="intro-tagline">Votre partenaire digital Ã  Angers</p>
      <div class="intro-loader">
        <div class="loader-dot"></div>
        <div class="loader-dot"></div>
        <div class="loader-dot"></div>
      </div>
    </div>
  </div>
  
  <style>
  .intro-screen{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100vh;
    background:linear-gradient(135deg,#0a0f16 0%,#111827 50%,#1a2332 100%);
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:99999;
    opacity:1;
    transition:opacity 1000ms cubic-bezier(.25,.46,.45,.94),transform 1000ms cubic-bezier(.25,.46,.45,.94);
  }
  .intro-screen.fade-out{
    opacity:0;
    transform:scale(1.05);
    pointer-events:none;
  }
  .intro-content{
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:32px;
    animation:fadeUpIntro 1200ms cubic-bezier(.34,.46,.35,1) forwards;
  }
  @keyframes fadeUpIntro{
    0%{
      opacity:0;
      transform:translateY(40px) scale(.95);
    }
    100%{
      opacity:1;
      transform:translateY(0) scale(1);
    }
  }
  .intro-logo{
    height:120px;
    width:auto;
    filter:drop-shadow(0 10px 30px rgba(212,175,55,.4));
    animation:logoGlow 3s ease-in-out infinite;
  }
  @keyframes logoGlow{
    0%,100%{
      filter:drop-shadow(0 10px 30px rgba(212,175,55,.3));
      transform:scale(1);
    }
    50%{
      filter:drop-shadow(0 15px 50px rgba(212,175,55,.7));
      transform:scale(1.02);
    }
  }
  .intro-tagline{
    font-family:Montserrat,sans-serif;
    font-size:1.1rem;
    font-weight:500;
    color:var(--kano-light);
    opacity:.85;
    margin:0;
    letter-spacing:.5px;
    animation:fadeIn 1200ms cubic-bezier(.34,.46,.35,1) 400ms backwards;
  }
  @keyframes fadeIn{
    from{
      opacity:0;
      transform:translateY(10px);
    }
    to{
      opacity:.85;
      transform:translateY(0);
    }
  }
  .intro-loader{
    display:flex;
    gap:12px;
    margin-top:16px;
    animation:fadeIn 1200ms cubic-bezier(.34,.46,.35,1) 600ms backwards;
  }
  .loader-dot{
    width:10px;
    height:10px;
    border-radius:50%;
    background:var(--kano-gold);
    animation:dotPulse 1.6s cubic-bezier(.4,.25,.3,1) infinite;
  }
  .loader-dot:nth-child(1){animation-delay:0s}
  .loader-dot:nth-child(2){animation-delay:.3s}
  .loader-dot:nth-child(3){animation-delay:.6s}
  @keyframes dotPulse{
    0%,80%,100%{
      opacity:.25;
      transform:scale(.7);
    }
    40%{
      opacity:1;
      transform:scale(1.3);
    }
  }
  @media (max-width:768px){
    .intro-logo{height:100px}
    .intro-tagline{font-size:1rem}
    .intro-content{gap:24px}
  }
  @media (max-width:420px){
    .intro-logo{height:80px}
    .intro-tagline{font-size:.95rem}
    .intro-content{gap:20px}
    .loader-dot{width:8px;height:8px}
  }
  </style>
  
  <script>
  const SESSION_KEY = 'kano_intro_shown';
  const introScreen = document.getElementById('intro-screen');
  
  function hasSeenIntroThisSession() {
    return sessionStorage.getItem(SESSION_KEY) === 'true';
  }
  
  function markIntroAsSeen() {
    sessionStorage.setItem(SESSION_KEY, 'true');
  }
  
  function hideIntro() {
    introScreen.classList.add('fade-out');
    setTimeout(() => {
      introScreen.style.display = 'none';
    }, 1000);
  }
  
  if (hasSeenIntroThisSession()) {
    introScreen.style.display = 'none';
  } else {
    document.body.style.overflow = 'hidden';
    
    setTimeout(() => {
      markIntroAsSeen();
      document.body.style.overflow = '';
      hideIntro();
    }, 3200);
  }
  </script>